
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.2">
    
    
      
        <title>Coding Style - LiveHD and Pyrope</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1118c9be.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7CFira+Code&display=fallback">
        <style>:root{--md-text-font-family:"";--md-code-font-family:"Fira Code"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#coding-style" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LiveHD and Pyrope" class="md-header__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LiveHD and Pyrope
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Coding Style
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LiveHD and Pyrope" class="md-nav__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    LiveHD and Pyrope
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        LiveHD and Pyrope
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Livehd
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Livehd" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Livehd
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01-install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01-usage/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../02-lgraph/" class="md-nav__link">
        LGraph
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../03-lnast/" class="md-nav__link">
        LNAST
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../03c-mmapstr/" class="md-nav__link">
        mmap_lib::str
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04a-bazel/" class="md-nav__link">
        Bazel build
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04b-pass/" class="md-nav__link">
        Creating a Pass
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04c-github/" class="md-nav__link">
        GitHub Guide
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Coding Style
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Coding Style
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    Overall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    strings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-naming-rules" class="md-nav__link">
    Variable naming rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-exceptions" class="md-nav__link">
    Error handling and exceptions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-tabs-indentation-is-2-spaces" class="md-nav__link">
    No tabs, indentation is 2 spaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include-order" class="md-nav__link">
    Include order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-column-widths-short" class="md-nav__link">
    Keep column widths short
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-trailing-spaces" class="md-nav__link">
    Avoid trailing spaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-c14-iterators-not-iterator" class="md-nav__link">
    Use C++14 iterators not ::iterator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-auto-or-const-auto-when-possible" class="md-nav__link">
    Use "auto", or "const auto", when possible.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const-and-local-variables" class="md-nav__link">
    const and local variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil" class="md-nav__link">
    Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-common-idioms-to-handle-mapsets" class="md-nav__link">
    Some common idioms to handle map/sets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-abslspan-instead-of-stdvector-as-return-argument" class="md-nav__link">
    Use absl::Span instead of std::vector as return argument
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pass-by-reference-and-use-const-when-possible" class="md-nav__link">
    Pass by reference and use "const" when possible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-dynamic-allocation-as-much-as-possible" class="md-nav__link">
    Avoid dynamic allocation as much as possible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare" class="md-nav__link">
    Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-fmtprint-to-print-messages-for-debugging" class="md-nav__link">
    Use fmt::print to print messages for debugging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-accessors-consistently" class="md-nav__link">
    Use accessors consistently
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-bitarray-class-to-have-a-compact-bitvector-marker" class="md-nav__link">
    Use bitarray class to have a compact bitvector marker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-iassert-extensively-be-meaningful-whenever-possible-in-assertions" class="md-nav__link">
    Use iassert extensively / be meaningful whenever possible in assertions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#develop-in-debug-mode-and-benchmark-in-release-mode" class="md-nav__link">
    Develop in debug mode and benchmark in release mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-compact-ifelse-brackets" class="md-nav__link">
    Use compact if/else brackets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decide-how-to-use-attributes" class="md-nav__link">
    Decide how to use attributes
  </a>
  
    <nav class="md-nav" aria-label="Decide how to use attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-non-persistent-annotations" class="md-nav__link">
    The Non-Persistent Annotations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-code-duplication" class="md-nav__link">
    Avoid code duplication
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Pyrope
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Pyrope" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Pyrope
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/02-basics/" class="md-nav__link">
        Basics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/03-bundle/" class="md-nav__link">
        Bundles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/04-variables/" class="md-nav__link">
        Variables and types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/05-assert/" class="md-nav__link">
        Assertions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/06-functions/" class="md-nav__link">
        Functions and methods
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/06b-pipelining/" class="md-nav__link">
        Pipelining
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/07-typesystem/" class="md-nav__link">
        Type system
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/09-stdlib/" class="md-nav__link">
        Pyrope std lib
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    Overall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    strings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-naming-rules" class="md-nav__link">
    Variable naming rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-exceptions" class="md-nav__link">
    Error handling and exceptions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-tabs-indentation-is-2-spaces" class="md-nav__link">
    No tabs, indentation is 2 spaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include-order" class="md-nav__link">
    Include order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-column-widths-short" class="md-nav__link">
    Keep column widths short
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-trailing-spaces" class="md-nav__link">
    Avoid trailing spaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-c14-iterators-not-iterator" class="md-nav__link">
    Use C++14 iterators not ::iterator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-auto-or-const-auto-when-possible" class="md-nav__link">
    Use "auto", or "const auto", when possible.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const-and-local-variables" class="md-nav__link">
    const and local variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil" class="md-nav__link">
    Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-common-idioms-to-handle-mapsets" class="md-nav__link">
    Some common idioms to handle map/sets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-abslspan-instead-of-stdvector-as-return-argument" class="md-nav__link">
    Use absl::Span instead of std::vector as return argument
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pass-by-reference-and-use-const-when-possible" class="md-nav__link">
    Pass by reference and use "const" when possible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-dynamic-allocation-as-much-as-possible" class="md-nav__link">
    Avoid dynamic allocation as much as possible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare" class="md-nav__link">
    Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-fmtprint-to-print-messages-for-debugging" class="md-nav__link">
    Use fmt::print to print messages for debugging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-accessors-consistently" class="md-nav__link">
    Use accessors consistently
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-bitarray-class-to-have-a-compact-bitvector-marker" class="md-nav__link">
    Use bitarray class to have a compact bitvector marker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-iassert-extensively-be-meaningful-whenever-possible-in-assertions" class="md-nav__link">
    Use iassert extensively / be meaningful whenever possible in assertions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#develop-in-debug-mode-and-benchmark-in-release-mode" class="md-nav__link">
    Develop in debug mode and benchmark in release mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-compact-ifelse-brackets" class="md-nav__link">
    Use compact if/else brackets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decide-how-to-use-attributes" class="md-nav__link">
    Decide how to use attributes
  </a>
  
    <nav class="md-nav" aria-label="Decide how to use attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-non-persistent-annotations" class="md-nav__link">
    The Non-Persistent Annotations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-code-duplication" class="md-nav__link">
    Avoid code duplication
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="coding-style">Coding Style</h1>
<p>These are the coding style rules for LiveHD C++. Each rule can be broken, but it
should be VERY rare, and a small comment should be placed explaining why.</p>
<h2 id="overall">Overall</h2>
<ul>
<li>When possible keep the system simple. Complexity is the enemy of maintenance.</li>
<li>Deprecate no longer used features.</li>
<li>Try to reduce friction. This means to avoid hidden/complex steps.</li>
<li>Every main API should have a unit test for testing but also to demonstrate usage.</li>
</ul>
<h2 id="comments">comments</h2>
<p>Code should be the comments, try to keep comments concise. They should explain
the WHY not the HOW. The code is the HOW.</p>
<p>Labels used in comments:</p>
<div class="highlight"><pre><span></span><code>// FIXME: Known bug/issue but no time to fix it at the moment

// TODO: Code improvement that will improve perf/quality/??? but no time at the moment

// WARNING: message for some &quot;strange&quot; &quot;weird&quot; code that if changes has effects
// (bug). Usually, this is a &quot;not nice&quot; code that must be kept for some reason.

// NOTE: Any comment that you want to remember something about (not critical)

// STYLE: why you broke a style rule (pointers, iterator...)
</code></pre></div>
<h2 id="strings">strings</h2>
<p>Avoid std::string and std::string_view. Use them only when interfacing external project. Use mmap_lib::str</p>
<p>Avoid pointers, use std::unique_ptr with RAII</p>
<h2 id="variable-naming-rules">Variable naming rules</h2>
<ul>
<li>No camelCase. Use underscores to separate words:
<div class="highlight"><pre><span></span><code><span class="n">foo_bar</span> <span class="o">=</span> <span class="n">Foo_bar</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</code></pre></div></li>
<li>Use plural for containers with multiple entries like vector, singular otherwise
<div class="highlight"><pre><span></span><code><span class="n">elem</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</code></pre></div></li>
<li>Classes/types/enums start with uppercase. Lowercase otherwise
<div class="highlight"><pre><span></span><code><span class="n">val</span> <span class="o">=</span> <span class="n">My_enum</span><span class="o">::</span><span class="n">Big</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Sweet_potato</span> <span class="p">{</span>
</code></pre></div></li>
</ul>
<h2 id="error-handling-and-exceptions">Error handling and exceptions</h2>
<p>Use the Pass::error or Pass:warn for error and likely error (warn). Internally, error generates
and exception capture by the main lgshell to move to the next task.</p>
<div class="highlight"><pre><span></span><code><span class="n">Pass</span><span class="o">::</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;inou_yaml: can only have a yaml_input or a graph_name, not both&quot;</span><span class="p">);</span>
<span class="n">Pass</span><span class="o">::</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;inou_yaml.to_lg: output:{} input:{} graph:{}&quot;</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">graph_name</span><span class="p">);</span>
</code></pre></div>
<h2 id="no-tabs-indentation-is-2-spaces">No tabs, indentation is 2 spaces</h2>
<p>Make sure to configure your editor to use 2 spaces</p>
<p>You can configure your text editor to do this automatically</p>
<h2 id="include-order">Include order</h2>
<p>First do C includes (try to avoid when possible), then an empty line with C++
includes, then an empty line followed with lgraph related includes. E.g:</p>
<div class="highlight"><pre><span></span><code>#include &lt;sys/types.h&gt;
#include &lt;dirent.h&gt;

#include &lt;iostream&gt;
#include &lt;set&gt;

#include &quot;graph_library.hpp&quot;
#include &quot;lgedgeiter.hpp&quot;
</code></pre></div>
<h2 id="keep-column-widths-short">Keep column widths short</h2>
<ul>
<li>Less than 120 characters if at all possible (meaning not compromising
  readability)</li>
</ul>
<p>You can configure your text editor to do this automatically</p>
<h2 id="avoid-trailing-spaces">Avoid trailing spaces</h2>
<p>You can configure your text editor to highlight them.
 https://github.com/ntpeters/vim-better-whitespace</p>
<h2 id="use-c14-iterators-not-iterator">Use C++14 iterators not ::iterator</h2>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">idx</span><span class="p">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">unordered</span><span class="p">())</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
<p>Use structured returns when iterator is returned for cleaner code:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">id</span><span class="p">]</span><span class="o">:</span><span class="n">name2id</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
</code></pre></div>
<h2 id="use-auto-or-const-auto-when-possible">Use "auto", or "const auto", when possible.</h2>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">idx</span><span class="p">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">unordered</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="nl">c</span><span class="p">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">out_edges</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span> <span class="p">{</span>
</code></pre></div>
<h2 id="const-and-local-variables">const and local variables</h2>
<p>It may be too verbose to write const all the time. The coding style request to use 
const (when possible) in iterators and pointers. The others are up to the programmer.</p>
<h2 id="do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil">Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil</h2>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;absl/container/flat_hash_map.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;absl/container/flat_hash_set.h&quot;</span><span class="cp"></span>

<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">Index_ID</span><span class="p">,</span> <span class="n">RTLIL</span><span class="o">::</span><span class="n">Wire</span> <span class="o">*&gt;</span>   <span class="n">my_example</span><span class="p">;</span>
</code></pre></div>
<h2 id="some-common-idioms-to-handle-mapsets">Some common idioms to handle map/sets</h2>
<p>Traverse the map/set, and as it traverses decide to erase some of the entries:
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">end</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">end</span><span class="p">;)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">condition_to_erase_it</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">m</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="o">++</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="o">++</span><span class="n">it</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>To check if a key is present:
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="n">set</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">key_value</span><span class="p">))</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="use-abslspan-instead-of-stdvector-as-return-argument">Use absl::Span instead of std::vector as return argument</h2>
<p>absl::Span is the equivalent of string_view for a string but for vectors. Like
string_view, it does not have ownership, and the size in the span can decrease
(not increase) without changing the original vector with "subspan". Faster and
more functional, no reason to return "const std::vector<Foo> &amp;", instead return
"absl::Span<Foo>".</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;absl/types/span.h&quot;</span><span class="cp"></span>

<span class="n">absl</span><span class="o">::</span><span class="n">Span</span><span class="o">&lt;</span><span class="n">Sub_node</span><span class="o">&gt;</span>    <span class="n">get_sub_nodes</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
  <span class="n">I</span><span class="p">(</span><span class="n">sub_nodes</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">absl</span><span class="o">::</span><span class="n">MakeSpan</span><span class="p">(</span><span class="n">sub_nodes</span><span class="p">).</span><span class="n">subspan</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Skip first element from vector</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="pass-by-reference-and-use-const-when-possible">Pass by reference and use "const" when possible</h2>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="k">const</span> <span class="n">Sub_node</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">);</span> <span class="c1">//or</span>

<span class="kt">void</span> <span class="nf">edit</span><span class="p">(</span><span class="n">Sub_node</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">);</span>
</code></pre></div>
<p>Note that older code still uses pointers, this is no longer allowed.</p>
<h2 id="avoid-dynamic-allocation-as-much-as-possible">Avoid dynamic allocation as much as possible</h2>
<p>The idea is to RARELY directly allocate pointer allocation</p>
<p>Use:</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span> <span class="o">=</span> <span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<p>instead of</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<h2 id="do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare">Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)</h2>
<p>Use:
<div class="highlight"><pre><span></span><code><span class="n">foo</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Sweet_potato</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">);</span>
</code></pre></div></p>
<p>instead of</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<h2 id="use-fmtprint-to-print-messages-for-debugging">Use fmt::print to print messages for debugging</h2>
<div class="highlight"><pre><span></span><code><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;This is a debug message, name = {}, id = {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">idx</span><span class="p">);</span>
</code></pre></div>
<h2 id="use-accessors-consistently">Use accessors consistently</h2>
<ul>
<li>get_XX(): gets "const XX &amp;" from object without side effects (assert if it does not exist)<ul>
<li>operator(Y) is an alias for get_XX(Y)</li>
</ul>
</li>
<li>ref_XX(): gets "XX * " (nullptr if it does not exist)</li>
<li>find_XX(): similar to get_XX but, if it does not exist return invalid object (is_invalid())</li>
<li>setup_XX(): gets XX from object, if it does not exists, it creates it</li>
<li>create_XX(): clears previous XX from object, and creates a new and returns it</li>
<li>set_XX(): sets XX to object, it creates if it does not exist. Similar to
  create, but does not return reference.</li>
</ul>
<p>If a variable is const, it can be exposed directly without get/set accessors</p>
<p>foo = x.const_var;  // No need to have x.get_const_var()</p>
<h2 id="use-bitarray-class-to-have-a-compact-bitvector-marker">Use bitarray class to have a compact bitvector marker</h2>
<div class="highlight"><pre><span></span><code><span class="n">bitarray</span> <span class="nf">visited</span><span class="p">(</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">max_size</span><span class="p">());</span>
</code></pre></div>
<h2 id="use-iassert-extensively-be-meaningful-whenever-possible-in-assertions">Use iassert extensively / be meaningful whenever possible in assertions</h2>
<p>This usually means use meaningful variable names and conditions that are easy to understand.
If the meaning is not clear from the assertion, use a comment in the same line.
This way, when the assertion is triggered it is easy to identify the problem.</p>
<div class="highlight"><pre><span></span><code><span class="n">I</span><span class="p">(</span><span class="n">n_edges</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">//at least one edge needed to perform this function</span>
</code></pre></div>
<p>We use the https://github.com/masc-ucsc/iassert package. Go to the iassert for more details on the advantages
and how to allow it to use GDB with assertions.</p>
<h2 id="develop-in-debug-mode-and-benchmark-in-release-mode">Develop in debug mode and benchmark in release mode</h2>
<p>Extra checks should be only in debug. Debug and release must execute the same,
only checks (not behavior change) allowed in debug mode.</p>
<p>Benchmark in release. It is 2x-10x faster.</p>
<h2 id="use-compact-ifelse-brackets">Use compact if/else brackets</h2>
<p>Use clang-format as configured to catch style errors. LGraph clang-format is
based on google format, but it adds several alignment directives and wider
terminal.</p>
<div class="highlight"><pre><span></span><code>   cd XXXX
   clang-format -i *pp
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">LGraph</span> <span class="o">*&gt;</span> <span class="n">Inou_yaml</span><span class="o">::</span><span class="n">generate</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">opack</span><span class="p">.</span><span class="n">graph_name</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// ...</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
     <span class="c1">// ..</span>
  <span class="p">}</span>
</code></pre></div>
<h2 id="decide-how-to-use-attributes">Decide how to use attributes</h2>
<p>Attributes are parameters or information that an be per Node, Node_pin or Edge. In LGraph, attributes are
persistent. This means that they are kept across execution runs in the LGraph database (E.g: in lgdb).</p>
<p>For persistent attributes, the structures to use are defined in core/annotate.hpp. Any new attribute
must be added to "annotate.hpp" to preserve persistence and to make sure that they are cleared when needed.</p>
<p>Many times it is important to have information per node, but that it is not persistent across runs. For example,
when building a LGraph from Yosys, there is a need to remember pointers from yosys to LGraph. This by definition can not be persistent because pointers change across runs. For this case, there are several options.</p>
<h3 id="the-non-persistent-annotations">The Non-Persistent Annotations</h3>
<p>If the data structure needs to keep most of the node/pins in the Lgraph, use the compact_class notation:
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span> <span class="n">Node_pin</span><span class="o">::</span><span class="n">Compact_class</span><span class="o">&gt;</span> <span class="n">s2pin</span><span class="p">;</span>
<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span> <span class="n">Node</span><span class="o">::</span><span class="n">Compact_class</span><span class="o">&gt;</span>     <span class="n">s2node</span><span class="p">;</span>

<span class="n">SomeData</span> <span class="n">d1</span><span class="p">;</span>
<span class="n">Lgraph</span> <span class="o">*</span><span class="n">lg</span><span class="p">;</span> <span class="c1">// LGraph owning the node</span>
<span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span>  <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">get_driver_pin</span><span class="p">().</span><span class="n">get_compact_class</span><span class="p">();</span> <span class="c1">// Example of use getting a pint</span>
<span class="n">s2node</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">get_compact_class</span><span class="p">();</span>
<span class="k">auto</span> <span class="n">name</span> <span class="o">=</span> <span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">].</span><span class="n">get_node</span><span class="p">(</span><span class="n">lg</span><span class="p">).</span><span class="n">get_name</span><span class="p">();</span>   <span class="c1">// Pick previously set driver name</span>
</code></pre></div></p>
<p>Another example:</p>
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">Node_pin</span><span class="o">::</span><span class="n">Compact</span><span class="p">,</span> <span class="n">RTLIL</span><span class="o">::</span><span class="n">Wire</span> <span class="o">*&gt;</span>  <span class="n">input_map</span><span class="p">;</span>

<span class="n">input_map</span><span class="p">[</span><span class="n">pin</span><span class="p">.</span><span class="n">get_compact</span><span class="p">()]</span> <span class="o">=</span> <span class="n">wire</span><span class="p">;</span>

<span class="k">auto</span> <span class="o">*</span><span class="n">wire</span> <span class="o">=</span> <span class="n">input_map</span><span class="p">[</span><span class="n">pin</span><span class="p">.</span><span class="n">get_compact</span><span class="p">()];</span>

<span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span><span class="o">:</span><span class="n">input_map</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Node_pin</span> <span class="nf">pin</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span> <span class="c1">// Key is a ::Compact, not a Node_pin</span>
  <span class="k">auto</span> <span class="n">name</span>  <span class="o">=</span> <span class="n">pin</span><span class="p">.</span><span class="n">get_name</span><span class="p">();</span>
  <span class="c1">// ... Some use here</span>
<span class="p">}</span>
</code></pre></div>
<p>If the data structure just holds a small subset of the graph, you can keep the
metadata, and use Node/Node_pin directly. E.g:</p>
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span> <span class="n">Node_pin</span><span class="o">&gt;</span> <span class="n">s2pin</span><span class="p">;</span>
<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span> <span class="n">Node</span><span class="o">&gt;</span>     <span class="n">s2node</span><span class="p">;</span>

<span class="n">SomeData</span> <span class="n">d1</span><span class="p">;</span>
<span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span>  <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">get_driver_pin</span><span class="p">();</span> <span class="c1">// Example of use getting a pint</span>
<span class="n">s2node</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">name</span> <span class="o">=</span> <span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">].</span><span class="n">get_name</span><span class="p">();</span>   <span class="c1">// Pick previously set driver name</span>
</code></pre></div>
<p>In this case, it is fine to use the full Node, Node_pin, or Edge. This has some
pointers inside, but it is OK because it is not persistent.</p>
<h2 id="avoid-code-duplication">Avoid code duplication</h2>
<p>The rule is that if the same code appears in 3 places, it should be refactored</p>
<p>Tool to detect duplication
<div class="highlight"><pre><span></span><code>    find . -name &#39;*.?pp&#39; | grep -v test &gt;list.txt
    duplo -ml 12 -pt 90 list.txt report.txt
</code></pre></div></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../04c-github/" class="md-footer__link md-footer__link--prev" aria-label="Previous: GitHub Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              GitHub Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="../../pyrope/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.instant", "navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.2b46852b.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>